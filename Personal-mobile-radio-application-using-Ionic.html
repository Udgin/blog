<title>Personal mobile radio application using Ionic</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css><link rel=stylesheet href=prism.css><link><style>.content .tag,.content .number{display:inline;padding:inherit;font-size:inherit;line-height:inherit;text-align:inherit;vertical-align:inherit;border-radius:inherit;font-weight:inherit;white-space:inherit;background:inherit;margin:inherit}</style><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item href=..\blog/index.html><img src=..\blog/favicon.ico width=28 height=28>Â Programming notes</a> <a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample><span aria-hidden></span> <span aria-hidden></span> <span aria-hidden></span></a></div><div id=navbarBasicExample class=navbar-menu><div class=navbar-start><div class=navbar-item><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link>About me</a><div class=navbar-dropdown> <a class=navbar-item>Facebook</a> <a class=navbar-item>LinkedIn</a> <a class=navbar-item>GitHub</a> <a class=navbar-item>Email</a></div></div></div></div></div></nav><section class=section><div class=container><div class=content><h1 id=personal-mobile-radio-application-using-ionic>Personal mobile radio application using Ionic</h1><p>Hi, there!<p>Finally I am tired because of all advertisements which we have in any simple radio mobile application. I just want to listen radio and that is all! Quite simple, hah?<p>So I decided to create a simple radio mobile application by myself. I thought about Xamarin as I have some experience in creating application using it. But I decided to use new framework for me and it is Ionic. I am very impressed how cool it is and how easy to create application using it. It took about 2 hours to install all dependencies (ionic, android studio, java), deploy and run a first version of my application on my android device. Quite fast!<p>I am using Ubuntu 16.04.<p>Please find the steps below:<ol><li>I have installed ionic framework using this <a href=http://ionicframework.com/docs/intro/installation/ >link</a> and create blank application: <code>ionic start radioOn blank</code>.<li>And that is all, to start our application need to run <code>ionic serve</code>.<li>As I want to listen an online radio, I need to create a provider to listen online stream: Html5Audio:</ol>
<pre><code class=language-typescript>import { Injectable, Output, EventEmitter } from '@angular/core';

@Injectable()
export class Html5Audio {
    @Output()
    ended = new EventEmitter();

    private pad2(number) { (number &lt; 10 ? '0' : '') + number; }

    audioPlayer: any;
    time: string;
    @Output()
    isPlaying = false;
    readyStateInterval = null;
    url: string;

    public play(url: string) {
        if (this.audioPlayer) {
            this.stop();
        }
        this.url = url;
        this.audioPlayer = new Audio(this.url);
        this.isPlaying = true;
        this.audioPlayer.play();

        this.audioPlayer.addEventListener("timeupdate", () => {
            if (this.audioPlayer) {
                var s = this.audioPlayer.currentTime % 60;
                var m = (this.audioPlayer.currentTime / 60) % 60;
                var h = ((this.audioPlayer.currentTime / 60) / 60) % 60;
                if (this.isPlaying &amp;&amp; this.audioPlayer.currentTime > 0) {
                    this.time = this.pad2(h) + ':' + this.pad2(m) + ':' + this.pad2(s);
                }
            }
        }, false);
        this.audioPlayer.addEventListener("error", (ex) => {
            console.error(ex);
        }, false);
        this.audioPlayer.addEventListener("canplay", () => {
            console.log('CAN PLAY');
        }, false);
        this.audioPlayer.addEventListener("waiting", () => {
            this.isPlaying = false;
        }, false);
        this.audioPlayer.addEventListener("playing", () => {
            this.isPlaying = true;
        }, false);
        this.audioPlayer.addEventListener("ended", () => {
            this.stop();
            this.ended.emit();
        }, false);
    }

    pause() {
        this.isPlaying = false;
        this.audioPlayer.pause();
    }

    stop() {
        this.isPlaying = false;
        this.audioPlayer.pause();
        this.audioPlayer = null;
    }
}
</code></pre><ol start=4><li>It has been imported to /src/app/app.module.<li>There is only one page with a list of stations (I have <a href=https://github.com/eapyl/radioon/blob/master/src/pages/home/home.ts>only 3</a> which I listen). Click on a station - starting this station, and there is one button to stop music(<a href=https://github.com/eapyl/radioon/blob/master/src/pages/home/home.html>link</a>). That is all. Simple!<li>After that we need to prepare icon and splash image for application. I am using <a href=http://game-icons.net>game-icons</a> to create an icon and <a href=https://unsplash.com/ >unspalsh</a> to find full size images.<li>Need to put created icon.png and splash.png to /resources/icon.png and /resources/splash.png and run the next command <code>ionic cordova resources</code> (you have to have an account in Ionic portal and it is free).<li>To <a href=http://ionicframework.com/docs/intro/deploying/ >deploy</a> our application need to run <code>ionic cordova build android --prod --release</code> and it will create *.apk file. We need to sign it using 'Sign Android APK' section from <a href=http://ionicframework.com/docs/intro/deploying/ >here</a>.<li>That is all. We have signed apk which we can copy on our device and install.</ol><p>Please find my project <a href=https://github.com/eapyl/radioon>here</a>. Signed apk file <a href=https://mega.nz/#!edsTXT6L>here</a>.<p>How it looks like:<br> <img src=Personal-mobile-radio-application-using-Ionic\radio-on-screenshot.png alt=image><p>Cheers,</div><div><div class=sharethis-inline-share-buttons></div></div></div></section><script async src=prism.js></script><script>(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-87583712-1","auto");ga("send","pageview")</script><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5906f3ca75e4e1001109c19a&product=inline-share-buttons"></script>