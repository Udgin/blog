<title>Simplest syslog server for rfc5424 (TCP)</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css><link rel=stylesheet href=prism.css><link><style>.content .tag,.content .number{display:inline;padding:inherit;font-size:inherit;line-height:inherit;text-align:inherit;vertical-align:inherit;border-radius:inherit;font-weight:inherit;white-space:inherit;background:inherit;margin:inherit}</style><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item href=..\blog/index.html><img src=..\blog/favicon.ico width=28 height=28>Â Programming notes</a> <a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample><span aria-hidden></span> <span aria-hidden></span> <span aria-hidden></span></a></div><div id=navbarBasicExample class=navbar-menu><div class=navbar-start><div class=navbar-item><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link>About me</a><div class=navbar-dropdown> <a class=navbar-item>Facebook</a> <a class=navbar-item>LinkedIn</a> <a class=navbar-item>GitHub</a> <a class=navbar-item>Email</a></div></div></div></div></div></nav><section class=section><div class=container><div class=content><h1 id=simplest-syslog-server-for-rfc5424-tcp>Simplest syslog server for rfc5424 (TCP)</h1><p>I am working on onside project where we have more than 5 docker containers. Previously we used just serilog to do our logging in all our containers. So each project had his own logging mechanism. Finally we decided to centralize our logging system ans start using docker logs. There are a lot of solutions using clouds (e.g. <a href=https://www.loggly.com/ >loggly</a>) or quite complex systems to grab, analyze and show your logs (like <a href=https://kafka.apache.org>kafka</a>, <a href=https://www.elastic.co/products/kibana>kibana</a>). But we wanted to save our logs to simple txt files without any additional complex stuff.<p>There are nice project which allows automatically read docker container logs and push them to one syslog server - <a href=https://github.com/gliderlabs/logspout>logspout</a>.<p>We tried to find simple syslog server without success. So there is a <a href=https://github.com/eapyl/syslog-collector>small syslog server</a> written in dotnet core. I used serilog to write logs to files (<a href=https://github.com/serilog/serilog-sinks-rollingfile>Rolling File</a>).<p>So docker-compose configuration looks like:
<pre><code class=language-yaml>  #another containers
  logspout:
    image: gliderlabs/logspout
    command: syslog+tcp://logcollector:5000
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    depends_on:
      - logcollector
  logcollector:
    image: eapyl/syslog-collector
    volumes: 
      - $PWD/../logs:/log/logs
</code></pre><p>After that logs from all our containers are in logs folder! Very simple and easy!<p>Please find docker image <a href=https://hub.docker.com/r/eapyl/syslog-collector/ >here</a>.<p>P.S. We started to write log message to stdout or stderr using <a href=https://github.com/serilog/serilog-sinks-literate>serilog</a>. So it was just small configuration change in all our projects to use Serilog.Literate instead of Serilog.RollingFile .<p>Thanks!</div><div><div class=sharethis-inline-share-buttons></div></div></div></section><script async src=prism.js></script><script>(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-87583712-1","auto");ga("send","pageview")</script><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5906f3ca75e4e1001109c19a&product=inline-share-buttons"></script>