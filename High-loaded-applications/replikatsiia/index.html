<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title> - Replication</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">Even</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;">Even</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;High-loaded-applications&#x2F;replikatsiia&#x2F;">Replication</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2018-09-20</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>В этой главе мы изучили вопрос репликации. Репликация может служить нескольким
целям.</p>
<p> Высокая доступность. Сохранение работоспособности системы в целом даже
в случае отказа одной из машин (или нескольких машин, или даже целого
ЦОДа).</p>
<p> Работа в офлайн-режиме. Возможность продолжения работы приложения
в случае прерывания соединения с сетью.</p>
<p> Задержка. Данные размещаются географически близко к пользователям, чтобы
те могли работать с ними быстрее.</p>
<p> Масштабирование. Возможность обрабатывать бо' льшие объемы операций чтения,
чем способна обработать одна машина, с помощью выполнения операций
чтения на репликах.</p>
<p>Несмотря на кажущуюся простоту задачи — хранение копий одних и тех же данных
на нескольких машинах, — репликация оказывается весьма непростым делом. Она
требует тщательного обдумывания вопроса конкурентного доступа и всех возможных
сбоев, а также того, как справиться с их последствиями. Как минимум необходимо
что-то делать с недоступными узлами и разрывами сети (и это не говоря уже
о более коварных типах отказов, например незаметной порче данных вследствие
программных ошибок).</p>
<p>Мы обсудили три основных метода репликации.</p>
<p> Репликация с одним ведущим узлом. Клиенты отправляют информацию обо всех
операциях записи одному узлу (ведущему), который отправляет поток событий
изменения данных другим репликам (ведомым узлам). Операции чтения могут
выполняться в любой реплике, но прочитанные из ведомых узлов данные могут
оказаться устаревшими.</p>
<p> Репликация с несколькими ведущими узлами. Клиенты отправляют информацию
о каждой из операций записи одному из нескольких ведущих узлов, могущих эту
информацию принимать. Ведущие могут отправлять поток событий изменения
данных друг другу и любым ведомым.</p>
<p> Репликация без ведущего узла. Клиенты отправляют информацию о каждой из
операций записи одному из нескольких узлов и читают из нескольких узлов параллельно,
чтобы обнаружить узлы с устаревшими данными и внести поправки.</p>
<p>У каждого из этих методов есть свои достоинства и недостатки. Репликация с одним
ведущим узлом широко распространена в силу своей простоты и отсутствия
надобности в разрешении конфликтов. Методы репликации с несколькими ведущими
узлами и без ведущего узла, возможно, более устойчивы к отказам узлов, разрывам
сети и резким скачкам времени задержки за счет усложнения и обеспечения
лишь очень слабых гарантий согласованности.</p>
<p>Репликация может быть синхронной или асинхронной; это очень сильно влияет
на поведение системы в случае сбоя. Хотя асинхронная репликация может выполняться
быстрее в случае нормальной работы системы, важно понимать, что
произойдет при росте задержки репликации и отказах серверов. В случае отказа
ведущего узла и возведения одного из ведомых узлов в ранг ведущего существует
вероятность потери недавно зафиксированных данных.</p>
<p>Мы рассмотрели некоторые необычные эффекты, вызываемые задержкой репликации,
и обсудили несколько моделей согласованности, полезных при решении
вопроса о требуемом поведении приложения в случае задержки репликации.</p>
<p> Согласованность типа «чтение после записи». Пользователи должны всегда
видеть данные, которые они сами отправили в БД.</p>
<p> Монотонное чтение. После того как пользователь увидел данные по состоянию
на какой-либо момент времени, он не должен позднее увидеть те же данные по
состоянию на более ранний момент времени.</p>
<p> Согласованное префиксное чтение. Пользователи должны видеть данные в состоянии,
не нарушающем причинно-следственных связей: например, видеть
вопрос и ответ на него в правильном порядке.</p>
<p>Наконец, мы обсудили неотъемлемые для репликации с несколькими ведущими
узлами и без ведущего узла вопросы конкурентного доступа: поскольку в них допускается несколько конкурентных операций записи, вероятны конфликты.
Мы изучили алгоритм, который может использоваться в базах данных для выяснения,
произошла ли одна операция до другой, или они происходили конкурентно.
Мы также затронули методы разрешения конфликтов путем слияния конкурентных
обновлений.</p>
<p>В следующей главе мы продолжим рассмотрение распределенных по нескольким
машинам данных через призму эквивалента репликации: разбиения большого набора
данных на секции (partitions).</p>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;eapyl.github.io&#x2F;tags&#x2F;high-load&#x2F;">#high-load</a>
                    
                </div>
            
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;eapyl.github.io&#x2F;even.js" ></script>
      
    </body>

</html>
